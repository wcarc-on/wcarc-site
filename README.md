WCARC Web Site
==============

This repository contains the source code for the website of the West Carleton Amateur Radio Club, https://wcarc.ca/. It's a static site, generated by [Jekyll](https://jekyllrb.com/) and hosted on Amazon S3 and CloudFront.

To generate the site, make sure you have Ruby installed, then run `bundle install` and `bundle exec jekyll build`. The output will appear in the `_site` folder.

I use the following post-receive hook to automatically post the site to Amazon after a `git push`:
```sh
#!/bin/sh

PATH=$PATH:$HOME/bin
GIT_REPO=$HOME/git/wcarc-site.git
TMP_GIT_CLONE=$HOME/tmp/wcarc

git clone $GIT_REPO $TMP_GIT_CLONE
unset GIT_DIR
cd $TMP_GIT_CLONE
bundle install
bundle exec jekyll build
rsync -rc --delete --force _site/ $HOME/wcarc.ca/
cd $HOME
rm -rf $TMP_GIT_CLONE
aws s3 sync $HOME/wcarc.ca s3://wcarc.ca --delete
aws cloudfront create-invalidation --distribution-id E3TVX2LU3B4OEX --paths "/*"

exit
```
